<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Example 2</title>

	<link rel="stylesheet" href="../simple.datagrid.css">

	<script src="../extra/jquery-1.7.1.min.js"></script>
	<script src="../extra/jquery-ui1.9m6.min.js"></script>
	<script src="example-data.js"></script>

	<script src="../simple.datagrid.js"></script>

	<style>
		body {
			margin: 1em;
		}
	</style>

</head>
<body>

	<table id="example2">
		<thead>
			<tr>
				<th>Name</th>
				<th>Latin name</th>
			</tr>
		</thead>
	</table>

	<script>
		function getData(parameters, on_success) {
			var rows_per_page = 10;
			var page = parameters.page || 1;
			var start_index = (page - 1) * rows_per_page;

			var total_pages = 1;
			var data = ExampleData.fruits
			if (data.length != 0) {
				total_pages = parseInt((data.length - 1) / rows_per_page) + 1;
			}

			if (parameters.sort_key) {
				data.sort(function(left, right) {
					var a = left[parameters.sort_key];
					var b = right[parameters.sort_key];

					if (parameters.sort_ascending) {
						var c = b;
						b = a;
						a = c;
					}

					if (a < b) {
						return -1;
					}
					else if (a > b) {
						return 1;
					}
					else {
						return 0;
					}
				});
			}

			on_success({
				total_pages: total_pages,
				rows: data.slice(start_index, start_index + rows_per_page)
			});
		}

		$(function() {
			$('#example2').simple_datagrid({
				onGetData: getData
			});
		});
	</script>

</body>
